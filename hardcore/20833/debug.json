import bs
from bsInternal import _getLog as get_log
from os.path import exists, sep

env = bs.getEnvironment()
path = env['userScriptsDirectory'] + sep + 'log'
del env

LOG = ''

def write_log():
    global LOG
    if not exists(path): mode = 'w+'
    else: mode = 'a'
    try: nLog = get_log() + '\n\n----------------------\n'
    except: nLog = '\n\nlog-get error;\n'
    if nLog != LOG:
        LOG = nLog
        with open(path, mode) as f:
            f.write(LOG)
            f.flush()
            f.close()

timer = bs.Timer(1000, bs.Call(write_log), timeType='real', repeat=True)